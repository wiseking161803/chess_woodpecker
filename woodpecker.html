<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="TriTueTre Chess Training - Luy·ªán t·∫≠p c·ªù vua theo ph∆∞∆°ng ph√°p Woodpecker">
    <title>‚ôû TriTueTre Chess Training</title>
    <link rel="stylesheet" href="css/woodpecker.css">
    <script>document.documentElement.setAttribute('data-theme', localStorage.getItem('ttc-theme') || 'dark');</script>
</head>

<body>
    <div class="wp-app">
        <!-- Header -->
        <header class="wp-header">
            <a class="wp-logo" onclick="wpApp._showDashboard()">
                <div class="wp-logo-icon">‚ôû</div>
                <div class="wp-logo-text">TriTueTre<span>Chess</span></div>
            </a>
            <div class="wp-header-right" id="wp-header-right"></div>
        </header>

        <!-- ========== LOGIN VIEW ========== -->
        <div id="view-login" class="wp-view">
            <div class="wp-login-container">
                <div class="wp-login-card">
                    <div class="wp-login-logo">
                        <div class="logo-icon">‚ôû</div>
                    </div>
                    <h1>ƒêƒÉng nh·∫≠p</h1>
                    <p class="login-subtitle">TriTueTre Chess Training</p>

                    <div class="wp-form-group">
                        <label>Username</label>
                        <input class="wp-input" id="login-username" type="text" placeholder="Nh·∫≠p username"
                            onkeydown="if(event.key==='Enter')wpApp.login()">
                    </div>
                    <div class="wp-form-group">
                        <label>Password</label>
                        <input class="wp-input" id="login-password" type="password" placeholder="Nh·∫≠p password"
                            onkeydown="if(event.key==='Enter')wpApp.login()">
                    </div>
                    <div id="login-error"
                        style="color:var(--danger);font-size:0.85rem;margin-bottom:12px;text-align:center;"></div>
                    <button class="wp-btn wp-btn-primary wp-btn-lg wp-btn-block" id="login-btn" onclick="wpApp.login()">
                        ƒêƒÉng nh·∫≠p
                    </button>
                    <div class="wp-register-link">
                        Ch∆∞a c√≥ t√†i kho·∫£n? <a href="#" onclick="wpApp.showRegister(); return false;">ƒêƒÉng k√Ω</a>
                    </div>
                </div>
            </div>
        </div>

        <!-- ========== REGISTER VIEW ========== -->
        <div id="view-register" class="wp-view">
            <div class="wp-login-container">
                <div class="wp-login-card wp-register-card">
                    <div class="wp-login-logo">
                        <div class="logo-icon">üìù</div>
                    </div>
                    <h1>ƒêƒÉng k√Ω t√†i kho·∫£n</h1>
                    <p class="login-subtitle">ƒêi·ªÅn th√¥ng tin ƒë·ªÉ t·∫°o t√†i kho·∫£n m·ªõi</p>

                    <div class="wp-form-group">
                        <label>H·ªç v√† t√™n <span class="required">*</span></label>
                        <input class="wp-input" id="reg-fullname" type="text" placeholder="Nh·∫≠p h·ªç v√† t√™n"
                            onkeydown="if(event.key==='Enter')document.getElementById('reg-username').focus()">
                    </div>
                    <div class="wp-form-group">
                        <label>Username <span class="required">*</span></label>
                        <input class="wp-input" id="reg-username" type="text"
                            placeholder="Ch·ªØ, s·ªë, d·∫•u g·∫°ch d∆∞·ªõi (3-20 k√Ω t·ª±)"
                            onkeydown="if(event.key==='Enter')document.getElementById('reg-password').focus()">
                    </div>
                    <div class="wp-form-group">
                        <label>M·∫≠t kh·∫©u <span class="required">*</span></label>
                        <input class="wp-input" id="reg-password" type="password" placeholder="√çt nh·∫•t 4 k√Ω t·ª±"
                            onkeydown="if(event.key==='Enter')document.getElementById('reg-confirm-password').focus()">
                    </div>
                    <div class="wp-form-group">
                        <label>X√°c nh·∫≠n m·∫≠t kh·∫©u <span class="required">*</span></label>
                        <input class="wp-input" id="reg-confirm-password" type="password"
                            placeholder="Nh·∫≠p l·∫°i m·∫≠t kh·∫©u"
                            onkeydown="if(event.key==='Enter')document.getElementById('reg-dob').focus()">
                    </div>
                    <div class="wp-form-group">
                        <label>Ng√†y sinh <span class="required">*</span></label>
                        <input class="wp-input" id="reg-dob" type="date">
                    </div>
                    <div id="reg-error"
                        style="color:var(--danger);font-size:0.85rem;margin-bottom:12px;text-align:center;"></div>
                    <button class="wp-btn wp-btn-primary wp-btn-lg wp-btn-block" id="reg-btn"
                        onclick="wpApp.register()">
                        ƒêƒÉng k√Ω
                    </button>
                    <div class="wp-register-link">
                        ƒê√£ c√≥ t√†i kho·∫£n? <a href="#" onclick="wpApp._showLogin(); return false;">ƒêƒÉng nh·∫≠p</a>
                    </div>
                </div>
            </div>
        </div>

        <!-- ========== REGISTER SUCCESS VIEW ========== -->
        <div id="view-register-success" class="wp-view">
            <div class="wp-login-container">
                <div class="wp-login-card">
                    <div class="wp-login-logo">
                        <div class="logo-icon"
                            style="background:var(--success-light, #d4edda);color:var(--success, #28a745);">‚úì</div>
                    </div>
                    <h1>ƒêƒÉng k√Ω th√†nh c√¥ng!</h1>
                    <p class="login-subtitle" style="margin-bottom:20px;">
                        T√†i kho·∫£n c·ªßa b·∫°n ƒë√£ ƒë∆∞·ª£c t·∫°o v√† ƒëang ch·ªù admin duy·ªát.<br>
                        Vui l√≤ng li√™n h·ªá admin ƒë·ªÉ ƒë∆∞·ª£c k√≠ch ho·∫°t t√†i kho·∫£n.
                    </p>
                    <button class="wp-btn wp-btn-primary wp-btn-lg wp-btn-block" onclick="wpApp._showLogin()">
                        ‚Üê Quay l·∫°i ƒëƒÉng nh·∫≠p
                    </button>
                </div>
            </div>
        </div>

        <!-- ========== DASHBOARD VIEW ========== -->
        <div id="view-dashboard" class="wp-view">
            <h1 class="wp-section-title">üß© B·ªô Puzzle c·ªßa b·∫°n</h1>
            <p class="wp-section-subtitle">Ch·ªçn m·ªôt b·ªô puzzle ƒë·ªÉ b·∫Øt ƒë·∫ßu luy·ªán t·∫≠p theo ph∆∞∆°ng ph√°p Woodpecker</p>
            <div id="wp-sets-grid" class="wp-puzzle-sets-grid"></div>
        </div>

        <!-- ========== SET DETAIL VIEW ========== -->
        <div id="view-set-detail" class="wp-view">
            <div id="wp-set-detail-content"></div>
        </div>

        <!-- ========== TRAINING VIEW ========== -->
        <div id="view-training" class="wp-view">
            <div class="wp-training-layout">
                <div class="wp-board-section">
                    <div class="wp-board-container">
                        <div id="wp-chessboard"></div>
                    </div>
                    <div class="wp-hint-flash" id="wp-hint-flash"></div>
                    <div class="wp-board-controls">
                        <button class="wp-btn-icon" onclick="wpApp.board && wpApp.board.flip()"
                            title="Xoay b√†n c·ªù">üîÑ</button>
                        <button class="wp-btn-icon" onclick="wpApp.showSkinSelector()"
                            title="ƒê·ªïi skin b√†n c·ªù">üé®</button>
                    </div>
                </div>

                <div class="wp-training-panel">
                    <div class="wp-training-top-bar">
                        <div class="wp-training-info">
                            <div class="puzzle-title" id="wp-training-set-name">Puzzle Set</div>
                            <div class="puzzle-counter" id="wp-puzzle-counter">Puzzle 0/0</div>
                        </div>
                        <div style="display:flex;align-items:center;gap:12px;">
                            <span id="wp-training-cycle-badge"
                                style="background:var(--accent-light);color:var(--accent);padding:4px 12px;border-radius:20px;font-size:0.8rem;font-weight:600;">Cycle
                                1</span>
                            <div class="wp-timer" id="wp-timer">
                                <span class="timer-icon">‚è±</span>
                                <span class="timer-value" id="wp-timer-value">10:00</span>
                            </div>
                        </div>
                    </div>

                    <div class="wp-training-content">
                        <div class="wp-training-progress">
                            <div class="wp-training-progress-bar">
                                <div class="wp-training-progress-fill" id="wp-progress-fill" style="width:0%"></div>
                            </div>
                            <span class="wp-training-progress-text" id="wp-progress-text">0/0</span>
                        </div>

                        <div class="wp-training-status thinking" id="wp-training-status">
                            S·∫µn s√†ng
                        </div>
                        <button class="wp-btn wp-btn-hint" id="wp-hint-btn" style="display:none;"
                            onclick="wpApp.useHint()">
                            üí° G·ª£i √Ω
                        </button>

                        <div class="wp-session-quick-stats" id="wp-session-quick-stats">
                            <div class="quick-stat">
                                <div class="quick-stat-value">0/0</div>
                                <div class="quick-stat-label">Solved</div>
                            </div>
                            <div class="quick-stat">
                                <div class="quick-stat-value">0.0%</div>
                                <div class="quick-stat-label">Accuracy</div>
                            </div>
                            <div class="quick-stat">
                                <div class="quick-stat-value">0.00</div>
                                <div class="quick-stat-label">PPM</div>
                            </div>
                        </div>

                        <div style="margin-top:auto;padding-top:16px;">
                            <button class="wp-btn wp-btn-danger wp-btn-block" onclick="wpApp.endSessionManual()">
                                ‚èπ K·∫øt th√∫c Session
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ========== ADMIN VIEW ========== -->
        <div id="view-admin" class="wp-view">
            <div class="wp-breadcrumb">
                <a onclick="wpApp._showDashboard()">Dashboard</a>
                <span class="sep">‚Ä∫</span>
                <span class="current">Admin</span>
            </div>

            <h1 class="wp-section-title">‚öô Qu·∫£n tr·ªã</h1>

            <!-- Pending Registrations -->
            <div class="wp-admin-section" id="wp-admin-pending-section" style="display:none;">
                <div class="wp-admin-section-header">
                    <h2>üìã ƒêƒÉng k√Ω ch·ªù duy·ªát</h2>
                    <span class="wp-pending-badge" id="wp-pending-count">0</span>
                </div>
                <div class="wp-admin-list" id="wp-admin-pending-list">
                    <div class="wp-loading"><span class="wp-spinner"></span> ƒêang t·∫£i...</div>
                </div>
            </div>

            <!-- Cycle Requests -->
            <div class="wp-admin-section" id="wp-admin-cycle-requests-section" style="display:none;">
                <div class="wp-admin-section-header">
                    <h2>üîÑ Y√™u c·∫ßu Cycle m·ªõi</h2>
                    <div style="display:flex;gap:8px;align-items:center;">
                        <span class="wp-pending-badge" id="wp-cycle-requests-count">0</span>
                        <button class="wp-btn wp-btn-success wp-btn-sm" onclick="wpApp.approveAllCycleRequests()">‚úì
                            Duy·ªát t·∫•t c·∫£</button>
                    </div>
                </div>
                <div class="wp-admin-list" id="wp-admin-cycle-requests-list">
                    <div class="wp-loading"><span class="wp-spinner"></span> ƒêang t·∫£i...</div>
                </div>
            </div>

            <!-- Users -->
            <div class="wp-admin-section">
                <div class="wp-admin-section-header">
                    <h2>üë• Qu·∫£n l√Ω Users</h2>
                    <div style="display:flex;gap:8px;">
                        <button class="wp-btn wp-btn-secondary wp-btn-sm" onclick="wpApp.showExportPdfForm()">üìÑ Xu·∫•t
                            PDF</button>
                        <button class="wp-btn wp-btn-primary wp-btn-sm" onclick="wpApp.showCreateUserForm()">+ T·∫°o
                            User</button>
                    </div>
                </div>
                <div class="wp-admin-list" id="wp-admin-users-list">
                    <div class="wp-loading"><span class="wp-spinner"></span> ƒêang t·∫£i...</div>
                </div>
            </div>

            <!-- Puzzle Sets -->
            <div class="wp-admin-section">
                <div class="wp-admin-section-header">
                    <h2>üß© Qu·∫£n l√Ω Puzzle Sets</h2>
                    <button class="wp-btn wp-btn-primary wp-btn-sm" onclick="wpApp.showCreatePuzzleSetForm()">+ T·∫°o
                        Puzzle Set</button>
                </div>
                <div class="wp-admin-list" id="wp-admin-sets-list">
                    <div class="wp-loading"><span class="wp-spinner"></span> ƒêang t·∫£i...</div>
                </div>
            </div>
        </div>
    </div>

    <!-- ========== MODAL ========== -->
    <div class="wp-modal-overlay" id="wp-modal-overlay" onclick="if(event.target===this)wpApp.closeModal()">
        <div class="wp-modal">
            <div class="wp-modal-header">
                <h3 id="wp-modal-title"></h3>
                <button class="wp-btn wp-btn-ghost wp-btn-sm" onclick="wpApp.closeModal()">‚úï</button>
            </div>
            <div class="wp-modal-body" id="wp-modal-body"></div>
        </div>
    </div>


    <!-- Toast Container -->
    <div class="wp-toast-container" id="wp-toast-container"></div>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chess.js/0.10.3/chess.min.js"></script>
    <script src="js/pgn-parser.js"></script>
    <script src="js/i18n.js"></script>
    <script src="js/chessboard.js"></script>
    <script src="js/sound-manager.js"></script>
    <script src="js/woodpecker-trainer.js"></script>
    <script src="js/woodpecker-app.js"></script>
</body>

</html>