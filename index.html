<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Chess Opening Trainer - H·ªçc khai cu·ªôc c·ªù vua v·ªõi ph∆∞∆°ng ph√°p l·∫∑p l·∫°i ng·∫Øt qu√£ng">
    <title>Chess Opening Trainer</title>
    <link rel="stylesheet" href="css/styles.css">
</head>

<body>
    <div class="app" id="app">
        <!-- Header -->
        <header class="app-header">
            <a class="app-logo" onclick="app.navigate('courses')">
                <div class="app-logo-icon">‚ôû</div>
                <div class="app-logo-text">Chess<span>Trainer</span></div>
            </a>
            <div class="header-actions">
                <button class="btn-icon" id="btn-admin-toggle" onclick="app.toggleAdmin()" title="Qu·∫£n tr·ªã">‚öô</button>
            </div>
        </header>

        <!-- ========== COURSE LIST VIEW ========== -->
        <div id="view-courses" class="view active">
            <h1 class="section-title">Kh√≥a h·ªçc c·ªßa b·∫°n</h1>
            <p class="section-subtitle">Ch·ªçn m·ªôt kh√≥a h·ªçc ƒë·ªÉ b·∫Øt ƒë·∫ßu ho·∫∑c ti·∫øp t·ª•c h·ªçc khai cu·ªôc</p>
            <div id="course-grid" class="course-grid"></div>
        </div>

        <!-- ========== COURSE DETAIL VIEW (chapter list) ========== -->
        <div id="view-course-detail" class="view">
            <div class="breadcrumb">
                <a onclick="app.navigate('courses')">Kh√≥a h·ªçc</a>
                <span class="separator">‚Ä∫</span>
                <span class="current" id="detail-breadcrumb-name"></span>
            </div>

            <div class="course-detail-header">
                <div class="course-detail-info">
                    <h1 class="section-title" id="detail-course-name"></h1>
                    <p class="section-subtitle" id="detail-course-desc"></p>
                </div>
            </div>

            <div id="course-chapter-list" class="chapter-list"></div>
        </div>

        <!-- ========== CHAPTER DETAIL VIEW (Learn/Review/Lines tabs) ========== -->
        <div id="view-chapter-detail" class="view">
            <div class="breadcrumb">
                <a onclick="app.navigate('courses')">Kh√≥a h·ªçc</a>
                <span class="separator">‚Ä∫</span>
                <a onclick="app.backToCourseDetail()" id="chapterdetail-breadcrumb-course"></a>
                <span class="separator">‚Ä∫</span>
                <span class="current" id="chapterdetail-breadcrumb-name"></span>
            </div>
            <div class="chapter-header">
                <div>
                    <h1 class="section-title" id="chapterdetail-name"></h1>
                    <p class="section-subtitle" id="chapterdetail-desc"></p>
                </div>
            </div>

            <!-- Tabs -->
            <div class="tab-bar">
                <button class="tab-btn active" data-tab="learn" onclick="app.switchTab('learn')">
                    üìò H·ªçc m·ªõi <span class="tab-badge" id="tab-learn-count">0</span>
                </button>
                <button class="tab-btn" data-tab="review" onclick="app.switchTab('review')">
                    üîÑ √în t·∫≠p <span class="tab-badge tab-badge-due" id="tab-review-count">0</span>
                </button>
                <button class="tab-btn" data-tab="lines" onclick="app.switchTab('lines')">
                    üìã T·∫•t c·∫£ bi·∫øn <span class="tab-badge" id="tab-lines-count">0</span>
                </button>
            </div>

            <!-- Learn Tab -->
            <div class="tab-content active" id="tab-learn">
                <div class="tab-panel-empty" id="learn-empty">
                    <div class="empty-icon">üéâ</div>
                    <div class="empty-text">B·∫°n ƒë√£ h·ªçc h·∫øt t·∫•t c·∫£ c√°c bi·∫øn trong ch∆∞∆°ng n√†y!</div>
                </div>
                <div id="learn-content" style="display:none;">
                    <div class="learn-info">
                        <p id="learn-info-text"></p>
                        <button class="btn btn-primary btn-lg" id="btn-start-learn" onclick="app.startNextLearn()">
                            ‚ñ∂ B·∫Øt ƒë·∫ßu h·ªçc
                        </button>
                    </div>
                    <div id="learn-lines-list" class="lines-list"></div>
                </div>
            </div>

            <!-- Review Tab -->
            <div class="tab-content" id="tab-review">
                <div class="tab-panel-empty" id="review-empty">
                    <div class="empty-icon">‚úÖ</div>
                    <div class="empty-text">Kh√¥ng c√≥ bi·∫øn n√†o c·∫ßn √¥n t·∫≠p ngay!</div>
                    <div class="empty-subtext">H√£y quay l·∫°i sau ƒë·ªÉ √¥n t·∫≠p</div>
                </div>
                <div id="review-content" style="display:none;">
                    <div class="review-info">
                        <p id="review-info-text"></p>
                        <button class="btn btn-primary btn-lg" id="btn-start-review" onclick="app.startReviewSession()">
                            üîÑ B·∫Øt ƒë·∫ßu √¥n t·∫≠p
                        </button>
                    </div>
                    <div id="review-lines-list" class="lines-list"></div>
                </div>
            </div>

            <!-- Lines Tab (all lines) -->
            <div class="tab-content" id="tab-lines">
                <div id="all-lines-list" class="lines-list"></div>
            </div>
        </div>

        <!-- ========== TRAINING VIEW ========== -->
        <div id="view-training" class="view">
            <div class="breadcrumb">
                <a onclick="app.navigate('courses')">Kh√≥a h·ªçc</a>
                <span class="separator">‚Ä∫</span>
                <a onclick="app.backToCourseDetail()" id="training-breadcrumb-course"></a>
                <span class="separator">‚Ä∫</span>
                <a onclick="app.backToChapterDetail()" id="training-breadcrumb-chapter"></a>
                <span class="separator">‚Ä∫</span>
                <span class="current" id="training-breadcrumb-line"></span>
            </div>

            <div class="training-layout">
                <div class="board-section">
                    <div class="board-container">
                        <div id="chessboard"></div>
                    </div>
                    <div class="board-controls">
                        <button class="btn-icon" onclick="app.flipBoard()" title="Xoay b√†n c·ªù">üîÑ</button>
                        <button class="btn-icon" onclick="app.goToStart()" title="V·ªÅ ƒë·∫ßu">‚èÆ</button>
                        <button class="btn-icon" onclick="app.goBack()" title="L√πi">‚óÄ</button>
                        <button class="btn-icon" onclick="app.goForward()" title="Ti·∫øn">‚ñ∂</button>
                        <button class="btn-icon" onclick="app.goToEnd()" title="V·ªÅ cu·ªëi">‚è≠</button>
                    </div>
                </div>

                <div class="info-panel">
                    <div class="training-header">
                        <div style="display:flex; align-items:center; gap:10px; justify-content:space-between;">
                            <div>
                                <div class="training-title" id="training-title"></div>
                                <span class="training-mode-badge" id="training-mode-badge"></span>
                            </div>
                            <div style="display:flex;gap:6px;">
                                <span id="mistake-counter" style="font-size:0.8rem; color:var(--text-muted);"></span>
                                <span id="queue-counter" style="font-size:0.8rem; color:var(--text-muted);"></span>
                            </div>
                        </div>
                    </div>

                    <div class="move-list-container">
                        <div class="move-list-header">Danh s√°ch n∆∞·ªõc ƒëi</div>
                        <div class="move-list" id="move-list"></div>
                    </div>

                    <div class="comment-panel" id="comment-panel">
                        <div class="comment-panel-header">üí¨ B√¨nh lu·∫≠n</div>
                        <div class="comment-content" id="comment-content">
                            <span class="comment-empty">Ch·ªçn m·ªôt n∆∞·ªõc ƒëi ƒë·ªÉ xem b√¨nh lu·∫≠n</span>
                        </div>
                    </div>

                    <div class="status-bar">
                        <div class="status-message" id="status-message">S·∫µn s√†ng</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ========== ADMIN VIEW ========== -->
        <div id="view-admin" class="view">
            <div class="breadcrumb">
                <a onclick="app.navigate('courses')">Kh√≥a h·ªçc</a>
                <span class="separator">‚Ä∫</span>
                <span class="current">Qu·∫£n tr·ªã</span>
            </div>

            <div class="admin-header">
                <h1 class="section-title">‚öô Qu·∫£n tr·ªã kh√≥a h·ªçc</h1>
                <button class="btn btn-primary" onclick="admin.showCourseForm()">+ T·∫°o kh√≥a h·ªçc m·ªõi</button>
            </div>

            <div id="admin-course-list" class="admin-list"></div>

            <div id="admin-chapters-section" style="display:none;">
                <div class="admin-header" style="margin-top:24px;">
                    <h2 class="section-title" id="admin-chapters-title"></h2>
                    <button class="btn btn-primary" onclick="admin.showChapterForm()">+ Th√™m ch∆∞∆°ng m·ªõi</button>
                </div>
                <div id="admin-chapter-list" class="admin-list"></div>
            </div>
        </div>
    </div>

    <!-- ========== MODAL ========== -->
    <div class="modal-overlay" id="modal-overlay">
        <div class="modal" id="modal">
            <div class="modal-header">
                <h3 class="modal-title" id="modal-title"></h3>
                <button class="btn-icon" onclick="app.closeModal()">‚úï</button>
            </div>
            <div class="modal-body" id="modal-body"></div>
        </div>
    </div>

    <!-- Completion Overlay -->
    <div class="completion-overlay" id="completion-overlay">
        <div class="completion-card">
            <div class="completion-icon" id="completion-icon">üéâ</div>
            <div class="completion-title" id="completion-title">Ho√†n th√†nh!</div>
            <div class="completion-text" id="completion-text"></div>
            <div class="completion-stats" id="completion-stats"></div>
            <div class="completion-actions">
                <button class="btn btn-secondary" onclick="app.backToChapterDetail()">Quay l·∫°i</button>
                <button class="btn btn-primary" id="btn-continue-training" onclick="app.continueTraining()">Ti·∫øp
                    t·ª•c</button>
            </div>
        </div>
    </div>

    <!-- Hint Flash -->
    <div class="hint-flash" id="hint-flash"></div>

    <!-- Toast Container -->
    <div class="toast-container" id="toast-container"></div>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chess.js/0.10.3/chess.min.js"></script>
    <script src="js/pgn-parser.js"></script>
    <script src="js/chessboard.js"></script>
    <script src="js/spaced-repetition.js"></script>
    <script src="js/course-manager.js"></script>
    <script src="js/trainer.js"></script>
    <script src="js/admin.js"></script>
    <script src="js/app.js"></script>
</body>

</html>